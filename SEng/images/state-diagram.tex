\begin{tikzpicture}[]

\begin{umlstate}[name=Am,fill=blue!20]{Operation}
\umlbasicstate[fill=green!20]{waiting}
\umlbasicstate[x=3,y=3]{calibrating}
\umlbasicstate[x=3,y=0]{testing}
\umlbasicstate[x=3,y=-3,fill=red!20]{transmitting}

\umlVHtrans[arg=calibrate(),pos=1.2]{waiting}{calibrating}
\umltrans[arg=test(),pos=.5]{calibrating}{testing}
\umltrans[arg=success,pos=.5]{testing}{waiting}
\umlVHtrans[anchor1=240,anchor2=195,arg=transmitMsg(),pos=1.5]{waiting}{transmitting}
\umlHVtrans[anchor1=165,anchor2=290,arg=transmitted,pos=1.5]{transmitting}{waiting}
\end{umlstate}

\umlstateinitial[name=init,x=-3,y=2]
\umlstatefinal[name=final,x=-3,y=-2]

\umlHVtrans[arg=startup(),pos=.4]{init}{waiting}
\umlHVtrans[arg=shutdown(),pos=.5]{waiting}{final}

\end{tikzpicture}