%!TEX root = ../MCSS.tex
\begin{algorithm}[H]
 \SetAlgoLined
% \KwIn{input}
% \KwResult{result/output}

\tcp{emptiness of $\mathcal{L}(TS\otimes \mathcal{A})$}
emptiness() \Begin{
    dfs1($q_0$) \\
    terminate(false)
}
\ \\
dfs1(q) \Begin{
    local $q'$ \\
    \tcp{mark $q$ as visited by dfs1}
    hash($q$) \\
    \tcp{on-the-fly}
    \ForAll{successors $q'$ of $q$}{
        \If{$q'$ not in hashtable}{
        dfs1($q'$)
        }
    }
    \tcp{acceptance state}
    \If{$q\in F$}{
        dfs2(q)
    }
}
\ \\
\tcp{All states visited by dfs2 have previously been generated by dfs1}
dfs2(q) \Begin{
    local($q'$)\\
    \tcp{mark $q$ as visited by dfs2}
    flag($q$) \\
    \ForAll{successors $q'$ of $q$}{
        \eIf{$q'$ on dfs1-stack}{
        terminate(true)
        }{
            \If{$q'$ not flagged}{
                dfs2($q'$)
            }
        }
    }
}

\caption{Nested Depth First Search}
\end{algorithm}